(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{336:function(t,e,n){var content=n(486);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(52).default)("b8c6673c",content,!0,{sourceMap:!1})},337:function(t,e,n){var content=n(488);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(52).default)("1ed77122",content,!0,{sourceMap:!1})},338:function(t,e,n){var content=n(490);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(52).default)("2e107364",content,!0,{sourceMap:!1})},485:function(t,e,n){"use strict";var o=n(336);n.n(o).a},486:function(t,e,n){(e=n(51)(!1)).push([t.i,".star{display:block;color:#f60!important;text-decoration:underline;margin-bottom:.1rem}.title{color:#0d1a26;font-weight:600;padding:.05rem .15rem;border-bottom:1px solid #ccc}.group{margin:.1rem 0 .2rem .3rem;padding:0}.group a,.group li{line-height:2}.group li{list-style:disc outside none;list-style:initial}.bottom{position:absolute;bottom:.1rem}.items{padding:.05rem .15rem}.items .el-input-number{width:1.02rem;line-height:.32rem}.items .el-input-number .el-input__inner{padding-left:0;padding-right:40px;height:.34rem;line-height:.34rem}.items .el-input-number .el-input-number__increase{line-height:.16rem}.items .custom-data i{cursor:pointer;float:right;color:#409eff;height:2em;line-height:2em}.items .expand-data{position:absolute;right:.15rem;width:5rem}.formItem{margin-bottom:.1rem}",""]),t.exports=e},487:function(t,e,n){"use strict";var o=n(337);n.n(o).a},488:function(t,e,n){(e=n(51)(!1)).push([t.i,".menus{color:#000;background-color:#fff;box-shadow:0 0 10px rgba(0,0,0,.3);min-width:1.8rem;text-align:left;padding:.08rem 0}.menus>div{line-height:2.2}.menus>div a{color:#314659;display:block;padding:0 .2rem;text-decoration:none;cursor:pointer}.menus>div a:hover{color:#1890ff}.menus>div a.flex{display:flex}.menus>div a.disabled{color:#ccc;cursor:default}.menus .line{background-color:transparent!important;padding:0;margin:.05rem 0;border-top:1px solid #eee}",""]),t.exports=e},489:function(t,e,n){"use strict";var o=n(338);n.n(o).a},490:function(t,e,n){(e=n(51)(!1)).push([t.i,".page{display:flex;width:100%;height:100%}.page .tools{flex-shrink:0;width:1.75rem;background-color:#f8f8f8;border-right:1px solid #d9d9d9;overflow-y:auto}.page .tools .title{color:#0d1a26;font-weight:600;font-size:.12rem;line-height:1;padding:.05rem .1rem;margin-top:.08rem;border-bottom:1px solid #ddd}.page .tools .title:first-child{border-top:none}.page .tools .buttons{padding:.1rem 0}.page .tools .buttons a{display:inline-block;color:#314659;line-height:1;width:.4rem;height:.4rem;text-align:center;text-decoration:none!important;cursor:pointer}.page .tools .buttons a .iconfont{font-size:.24rem}.page .tools .buttons a:hover{color:#1890ff}.page .full{flex:1;width:auto;position:relative;overflow:auto;background:#fff}.page .props{flex-shrink:0;width:2.4rem;padding:.1rem 0;background-color:#f8f8f8;border-left:1px solid #d9d9d9;overflow-y:auto;position:relative}.page .context-menu{position:fixed;z-index:10}",""]),t.exports=e},491:function(t,e,n){"use strict";n.r(e);n(24),n(34),n(23),n(36),n(35),n(21),n(22),n(11),n(91),n(37);var o=n(3),r=(n(25),n(353)),l=(n(321),n(324),n(413)),c=n(327),d=n(414),h=n(454),f=n(468),m=n(474),v=n(483);n(334);var w=[{group:"网络",children:[{name:"笔记本终端",icon:"iconbijiben2",data:{text:"",rect:{width:100,height:100},paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,name:"draw",icon:"",iconFamily:"iconfont",iconColor:"#2f54eb"}},{name:"台式机终端",icon:"icontaishiji1",data:{text:"",rect:{width:100,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"draw",icon:"",iconFamily:"iconfont",iconColor:"#2f54eb"}},{name:"防火墙",icon:"iconfanghuoqiang",data:{text:"",rect:{width:100,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"draw",icon:"",iconFamily:"iconfont",iconColor:"#2f54eb"}},{name:"交换机",icon:"iconjiaohuanji",data:{text:"",rect:{width:100,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"draw",icon:"",iconFamily:"iconfont",iconColor:"#2f54eb"}},{name:"核心交换机",icon:"iconhexinjiaohuanji",data:{text:"",rect:{width:100,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"draw",icon:"",iconFamily:"iconfont",iconColor:"#2f54eb"}},{name:"服务器",icon:"iconfuwuqi1",data:{text:"",rect:{width:100,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"draw",icon:"",iconFamily:"iconfont",iconColor:"#2f54eb"}}]},{group:"基本形状",children:[{name:"矩形",icon:"icon-rect",data:{text:"矩形",rect:{width:100,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"rectangle",iconFamily:"topology",iconColor:"#2f54eb"}},{name:"圆角矩形",icon:"icon-rectangle",data:{text:"圆角矩形",rect:{width:200,height:50},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,borderRadius:.1,name:"rectangle"}},{name:"圆",icon:"icon-circle",data:{text:"圆",rect:{width:100,height:100},name:"circle",textMaxLine:1}},{name:"三角形",icon:"icon-triangle",data:{text:"三角形",rect:{width:100,height:100},name:"triangle"}},{name:"菱形",icon:"icon-diamond",data:{text:"菱形",rect:{width:100,height:100},name:"diamond"}},{name:"五边形",icon:"icon-pentagon",data:{text:"五边形",rect:{width:100,height:100},name:"pentagon"}},{name:"六边形",icon:"icon-hexagon",data:{text:"六边形",rect:{width:100,height:100},paddingTop:10,paddingBottom:10,name:"hexagon"}},{name:"五角星",icon:"icon-pentagram",data:{text:"五角星",rect:{width:100,height:100},name:"pentagram"}},{name:"左箭头",icon:"icon-arrow-left",data:{text:"左箭头",rect:{width:200,height:100},name:"leftArrow"}},{name:"右箭头",icon:"icon-arrow-right",data:{text:"右箭头",rect:{width:200,height:100},name:"rightArrow"}},{name:"双向箭头",icon:"icon-twoway-arrow",data:{text:"双向箭头",rect:{width:200,height:100},name:"twowayArrow"}},{name:"云",icon:"icon-cloud",data:{text:"云",rect:{width:100,height:100},name:"cloud"}},{name:"消息框",icon:"icon-msg",data:{text:"消息框",rect:{width:100,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"message"}},{name:"文档",icon:"icon-file",data:{text:"文档",rect:{width:80,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"file"}},{name:"文本",icon:"icon-text",data:{text:"文本",rect:{width:160,height:30},name:"text"}}]},{group:"流程图",children:[{name:"开始/结束",icon:"icon-flow-start",data:{text:"开始",rect:{width:120,height:40},borderRadius:.5,name:"rectangle"}},{name:"流程",icon:"icon-rectangle",data:{text:"流程",rect:{width:120,height:40},name:"rectangle"}},{name:"判定",icon:"icon-diamond",data:{text:"判定",rect:{width:120,height:60},name:"diamond"}},{name:"数据",icon:"icon-flow-data",data:{text:"数据",rect:{width:120,height:50},name:"flowData"}},{name:"准备",icon:"icon-flow-ready",data:{text:"准备",rect:{width:120,height:50},name:"hexagon"}},{name:"子流程",icon:"icon-flow-subprocess",data:{text:"子流程",rect:{width:120,height:50},name:"flowSubprocess"}},{name:"数据库",icon:"icon-db",data:{text:"数据库",rect:{width:80,height:120},name:"flowDb"}},{name:"文档",icon:"icon-flow-document",data:{text:"文档",rect:{width:120,height:100},name:"flowDocument"}},{name:"内部存储",icon:"icon-internal-storage",data:{text:"内部存储",rect:{width:120,height:80},name:"flowInternalStorage"}},{name:"外部存储",icon:"icon-extern-storage",data:{text:"外部存储",rect:{width:120,height:80},name:"flowExternStorage"}},{name:"队列",icon:"icon-flow-queue",data:{text:"队列",rect:{width:100,height:100},name:"flowQueue"}},{name:"手动输入",icon:"icon-flow-manually",data:{text:"手动输入",rect:{width:120,height:80},name:"flowManually"}},{name:"展示",icon:"icon-flow-display",data:{text:"展示",rect:{width:120,height:80},name:"flowDisplay"}},{name:"并行模式",icon:"icon-flow-parallel",data:{text:"并行模式",rect:{width:120,height:50},name:"flowParallel"}},{name:"注释",icon:"icon-flow-comment",data:{text:"注释",rect:{width:100,height:100},name:"flowComment"}}]},{group:"活动图",children:[{name:"开始",icon:"icon-inital",data:{text:"",rect:{width:30,height:30},name:"circle",fillStyle:"#555",strokeStyle:"transparent"}},{name:"结束",icon:"icon-final",data:{text:"",rect:{width:30,height:30},name:"activityFinal"}},{name:"活动",icon:"icon-action",data:{text:"活动",rect:{width:120,height:50},borderRadius:.25,name:"rectangle"}},{name:"决策/合并",icon:"icon-diamond",data:{text:"决策",rect:{width:120,height:50},name:"diamond"}},{name:"垂直泳道",icon:"icon-swimlane-v",data:{text:"垂直泳道",rect:{width:200,height:500},name:"swimlaneV"}},{name:"水平泳道",icon:"icon-swimlane-h",data:{text:"水平泳道",rect:{width:500,height:200},name:"swimlaneH"}},{name:"垂直分岔/汇合",icon:"icon-fork-v",data:{text:"",rect:{width:10,height:150},name:"forkV",fillStyle:"#555",strokeStyle:"transparent"}},{name:"水平分岔/汇合",icon:"icon-fork",data:{text:"",rect:{width:150,height:10},name:"forkH",fillStyle:"#555",strokeStyle:"transparent"}}]},{group:"时序图和类图",children:[{name:"生命线",icon:"icon-lifeline",data:{text:"生命线",rect:{width:150,height:400},name:"lifeline"}},{name:"激活",icon:"icon-focus",data:{text:"",rect:{width:12,height:200},name:"sequenceFocus"}},{name:"简单类",icon:"icon-simple-class",data:{text:"Topolgoy",rect:{width:270,height:200},paddingTop:40,font:{fontFamily:"Arial",color:"#222",fontWeight:"bold"},fillStyle:"#ffffba",strokeStyle:"#7e1212",name:"simpleClass",children:[{text:"- name: string\n+ setName(name: string): void",name:"text",paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rectInParent:{x:0,y:0,width:"100%",height:"100%",rotate:0},font:{fontFamily:"Arial",color:"#222",textAlign:"left",textBaseline:"top"}}]}},{name:"类",icon:"icon-class",data:{text:"Topolgoy",rect:{width:270,height:200},paddingTop:40,font:{fontFamily:"Arial",color:"#222",fontWeight:"bold"},fillStyle:"#ffffba",strokeStyle:"#7e1212",name:"interfaceClass",children:[{text:"- name: string",name:"text",paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rectInParent:{x:0,y:0,width:"100%",height:"50%",rotate:0},font:{fontFamily:"Arial",color:"#222",textAlign:"left",textBaseline:"top"}},{text:"+ setName(name: string): void",name:"text",paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rectInParent:{x:0,y:"50%",width:"100%",height:"50%",rotate:0},font:{fontFamily:"Arial",color:"#222",textAlign:"left",textBaseline:"top"}}]}}]},{group:"图表控件",children:[{name:"折线图",icon:"icon-line-chart",data:{text:"折线图",rect:{width:300,height:200},name:"echarts",data:{echarts:{option:{xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[820,932,901,934,1290,1330,1320],type:"line"}]}}}}},{name:"柱状图",icon:"icon-bar-chart",data:{text:"柱状图",rect:{width:300,height:200},name:"echarts",data:{echarts:{option:{color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"直接访问",type:"bar",barWidth:"60%",data:[10,52,200,334,390,330,220]}]}}}}},{name:"饼图",icon:"icon-pie-chart",data:{text:"饼图",rect:{width:200,height:200},name:"echarts",data:{echarts:{option:{tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",x:"left",data:["直接访问","邮件营销","联盟广告","视频广告","搜索引擎"]},series:[{name:"访问来源",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:[{value:335,name:"直接访问"},{value:310,name:"邮件营销"},{value:234,name:"联盟广告"},{value:135,name:"视频广告"},{value:1548,name:"搜索引擎"}]}]}}}}},{name:"仪表盘",icon:"icon-dashboard-chart",data:{text:"仪表盘",rect:{width:300,height:300},name:"echarts",data:{echarts:{option:{tooltip:{formatter:"{a} <br/>{b} : {c}%"},toolbox:{feature:{restore:{},saveAsImage:{}}},series:[{name:"业务指标",type:"gauge",detail:{formatter:"{value}%"},data:[{value:50,name:"完成率"}]}]}}}}}]}],x=n(48),y={data:function(){return{nodeId:null,nodeIsJson:!1,nodeData:""}},props:{props:{type:Object,require:!0}},updated:function(){if(this.props.node&&this.nodeId!==this.props.node.id){this.props.expand=!1,this.nodeId=this.props.node.id;var t=this.props.node.data;this.nodeIsJson=this.isJson(t),this.nodeData=this.nodeIsJson?JSON.stringify(t,null,4):this.nodeData=t}},methods:{onChange:function(t){this.props.node&&(this.props.node.data=this.nodeIsJson?JSON.parse(this.nodeData):this.nodeData),this.$emit("change",this.props.node)},changeExpand:function(){this.props.expand=!this.props.expand},isJson:function(t){return"object"==Object(x.a)(t)&&"[object object]"==Object.prototype.toString.call(t).toLowerCase()&&!t.length}},computed:{getDisabled:function(){return!!this.$store.state.canvas.data.locked}}},_=(n(485),n(38)),C=Object(_.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.props.node||t.props.line||t.props.multi?t._e():n("div",[t.getDisabled?t._e():n("div",{staticClass:"bottom"},[n("div",{staticClass:"title"},[t._v("小提示")]),t._v(" "),t._m(0)])]),t._v(" "),t.props.node?n("div",[n("div",{staticClass:"title"},[t._v("位置和大小")]),t._v(" "),n("div",{staticClass:"items"},[t._m(1),t._v(" "),n("div",{staticClass:"flex grid"},[n("div",[n("el-input-number",{attrs:{"controls-position":"right",disabled:t.getDisabled},on:{change:t.onChange},model:{value:t.props.node.rect.x,callback:function(e){t.$set(t.props.node.rect,"x",e)},expression:"props.node.rect.x"}})],1),t._v(" "),n("div",{staticClass:"ml5"},[n("el-input-number",{attrs:{"controls-position":"right",disabled:t.getDisabled},on:{change:t.onChange},model:{value:t.props.node.rect.y,callback:function(e){t.$set(t.props.node.rect,"y",e)},expression:"props.node.rect.y"}})],1)])]),t._v(" "),n("div",{staticClass:"items"},[t._m(2),t._v(" "),n("div",{staticClass:"flex grid"},[n("div",[n("el-input-number",{attrs:{"controls-position":"right",disabled:t.getDisabled},on:{change:t.onChange},model:{value:t.props.node.rect.width,callback:function(e){t.$set(t.props.node.rect,"width",e)},expression:"props.node.rect.width"}})],1),t._v(" "),n("div",{staticClass:"ml5"},[n("el-input-number",{attrs:{"controls-position":"right",disabled:t.getDisabled},on:{change:t.onChange},model:{value:t.props.node.rect.height,callback:function(e){t.$set(t.props.node.rect,"height",e)},expression:"props.node.rect.height"}})],1)])]),t._v(" "),t.props.node.is3D?n("div",{staticClass:"items"},[t._m(3),t._v(" "),n("div",{staticClass:"flex grid"},[n("div",[n("el-input-number",{attrs:{"controls-position":"right",disabled:t.getDisabled},on:{change:t.onChange},model:{value:t.props.node.z,callback:function(e){t.$set(t.props.node,"z",e)},expression:"props.node.z"}})],1)])]):t._e(),t._v(" "),n("div",{staticClass:"items"},[t._m(4),t._v(" "),n("div",{staticClass:"flex grid"},[n("div",[n("el-input-number",{attrs:{"controls-position":"right",disabled:t.getDisabled,min:0,max:1,step:.1},on:{change:t.onChange},model:{value:t.props.node.borderRadius,callback:function(e){t.$set(t.props.node,"borderRadius",e)},expression:"props.node.borderRadius"}})],1),t._v(" "),n("div",{staticClass:"ml5"},[n("el-input-number",{attrs:{"controls-position":"right",disabled:t.getDisabled},on:{change:t.onChange},model:{value:t.props.node.rotate,callback:function(e){t.$set(t.props.node,"rotate",e)},expression:"props.node.rotate"}})],1)])]),t._v(" "),n("div",{staticClass:"items"},[t._m(5),t._v(" "),n("div",{staticClass:"flex grid"},[n("div",[n("el-input",{attrs:{size:"small","controls-position":"right",disabled:t.getDisabled},on:{change:t.onChange},model:{value:t.props.node.paddingLeft,callback:function(e){t.$set(t.props.node,"paddingLeft",e)},expression:"props.node.paddingLeft"}})],1),t._v(" "),n("div",{staticClass:"ml5"},[n("el-input",{attrs:{size:"small","controls-position":"right",disabled:t.getDisabled},on:{change:t.onChange},model:{value:t.props.node.paddingRight,callback:function(e){t.$set(t.props.node,"paddingRight",e)},expression:"props.node.paddingRight"}})],1)])]),t._v(" "),n("div",{staticClass:"items"},[t._m(6),t._v(" "),n("div",{staticClass:"flex grid"},[n("div",[n("el-input",{attrs:{size:"small","controls-position":"right",disabled:t.getDisabled},on:{change:t.onChange},model:{value:t.props.node.paddingTop,callback:function(e){t.$set(t.props.node,"paddingTop",e)},expression:"props.node.paddingTop"}})],1),t._v(" "),n("div",{staticClass:"ml5"},[n("el-input",{attrs:{size:"small","controls-position":"right",disabled:t.getDisabled},on:{change:t.onChange},model:{value:t.props.node.paddingBottom,callback:function(e){t.$set(t.props.node,"paddingBottom",e)},expression:"props.node.paddingBottom"}})],1)])]),t._v(" "),n("div",{staticClass:"items gray",staticStyle:{"line-height":"1.5"}},[t._v("\n\t\t\t内边距：输入数字表示像素；输入%表示百分比\n\t\t")]),t._v(" "),n("div",{staticClass:"title"}),t._v(" "),n("div",{staticClass:"items"},[n("div",{staticClass:"flex grid"},[n("div",{staticClass:"custom-data"},[t._v("自定义数据 "),n("i",{class:t.props.expand?"el-icon-zoom-out":"el-icon-zoom-in",attrs:{size:"small"},on:{click:t.changeExpand}},[t._v(t._s(t.props.expand?"缩小":"放大"))])])]),t._v(" "),n("div",{staticClass:"flex grid"},[n("div",{class:t.props.expand?"expand-data":""},[n("el-input",{attrs:{type:"textarea",rows:t.props.expand?15:3,disabled:t.getDisabled},on:{change:t.onChange},model:{value:t.nodeData,callback:function(e){t.nodeData=e},expression:"nodeData"}})],1)])])]):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"group"},[e("li",[this._v("方向键：控制节点移动5个像素")]),this._v(" "),e("li",[this._v("Ctrl + 方向键：控制节点移动1个像素")]),this._v(" "),e("li",[this._v("Ctrl + 鼠标移动：移动整个画布")]),this._v(" "),e("li",[this._v("Ctrl + 鼠标滚轮：缩放")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex grid"},[e("div",[this._v("X（px）")]),this._v(" "),e("div",{staticClass:"ml5"},[this._v("Y（px）")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex grid"},[e("div",[this._v("宽（px）")]),this._v(" "),e("div",{staticClass:"ml5"},[this._v("高（px）")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex grid"},[e("div",[this._v("Z（px）")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex grid"},[e("div",{attrs:{title:"百分比%对应的小数值"}},[this._v("圆角（0 - 1）")]),this._v(" "),e("div",{staticClass:"ml5"},[this._v("旋转（°）")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex grid"},[e("div",{attrs:{title:"padding-left"}},[this._v("内边距-左")]),this._v(" "),e("div",{staticClass:"ml5",attrs:{title:"padding-right"}},[this._v("内边距-右")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex grid"},[e("div",{attrs:{title:"padding-top"}},[this._v("内边距-上")]),this._v(" "),e("div",{staticClass:"ml5",attrs:{title:"padding-bottom"}},[this._v("内边距-下")])])}],!1,null,null,null).exports;function k(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(t,e)}(t))){var i=0,e=function(){};return{s:e,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,r=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){l=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw o}}}}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var T={data:function(){return{}},props:{canvas:{type:Object,require:!0},props:{type:Object,require:!0}},methods:{onTop:function(){if(this.props.node&&this.canvas.top(this.props.node),this.props.nodes){var t,e=k(this.props.nodes);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.canvas.top(n)}}catch(t){e.e(t)}finally{e.f()}}this.canvas.render()},onBottom:function(){if(this.props.node&&this.canvas.bottom(this.props.node),this.props.nodes){var t,e=k(this.props.nodes);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.canvas.bottom(n)}}catch(t){e.e(t)}finally{e.f()}}this.canvas.render()},onCombine:function(t){this.props.nodes&&(this.canvas.combine(this.props.nodes,t),this.canvas.render())},onUncombine:function(){this.props.node&&(this.canvas.uncombine(this.props.node),this.canvas.render())},onLock:function(){if(this.props.locked=!this.props.locked,this.props.node&&(this.props.node.locked=this.props.locked),this.props.nodes){var t,e=k(this.props.nodes);try{for(e.s();!(t=e.n()).done;){t.value.locked=this.props.locked}}catch(t){e.e(t)}finally{e.f()}}if(this.props.lines){var n,o=k(this.props.lines);try{for(o.s();!(n=o.n()).done;){n.value.locked=this.props.locked}}catch(t){o.e(t)}finally{o.f()}}this.canvas.render(!0)},onDel:function(){this.canvas.delete()}}};n(487);function D(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(t,e)}(t))){var i=0,e=function(){};return{s:e,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,r=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){l=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw o}}}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var A={data:function(){return{tools:w,canvas:{},canvasOptions:{rotateCursor:"/img/rotate.cur",keydown:1},props:{node:null,line:null,nodes:null,multi:!1,expand:!1,locked:!1},contextmenu:{left:null,top:null,bottom:null}}},components:{CanvasProps:C,CanvasContextMenu:Object(_.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menus"},[n("div",[n("a",{class:{disabled:!t.props.node&&!t.props.nodes},on:{click:function(e){return t.onTop()}}},[t._v("置顶")])]),t._v(" "),n("div",[n("a",{class:{disabled:!t.props.node&&!t.props.nodes},on:{click:function(e){return t.onBottom()}}},[t._v("置底")])]),t._v(" "),n("div",{staticClass:"line"}),t._v(" "),t.props.nodes?n("div",[n("a",{on:{click:function(e){return t.onCombine()}}},[t._v("组合")]),t._v(" "),n("div",[n("a",{on:{click:function(e){return t.onCombine(!0)}}},[t._v("包含")])])]):t._e(),t._v(" "),t.props.node&&"combine"===t.props.node.name?n("div",[n("a",{on:{click:function(e){return t.onUncombine()}}},[t._v("取消组合/包含")])]):t._e(),t._v(" "),n("div",[n("a",{class:{disabled:!t.props.node&&!t.props.nodes},on:{click:function(e){return t.onLock()}}},[t._v(t._s(t.props.locked?"解锁":"锁定"))])]),t._v(" "),n("div",{staticClass:"line"}),t._v(" "),n("div",[n("a",{class:{disabled:!t.props.node&&!t.props.nodes&&!t.props.line},on:{click:function(e){return t.onDel()}}},[t._v("删除")])]),t._v(" "),n("div",{staticClass:"line"}),t._v(" "),n("div",[n("a",{staticClass:"flex",on:{click:function(e){return t.canvas.undo()}}},[n("span",{staticClass:"full"},[t._v("撤消")]),t._v(" "),n("span",{staticClass:"ml50"},[t._v("Ctrl + Z")])])]),t._v(" "),n("div",[n("a",{on:{click:function(e){return t.canvas.redo()}}},[t._v("\n\t\t\t恢复\n\t\t\t"),n("span",{staticClass:"ml50"},[t._v("Ctrl + Shift+ Z")])])]),t._v(" "),n("div",{staticClass:"line"}),t._v(" "),n("div",[n("a",{staticClass:"flex",on:{click:function(e){return t.canvas.cut()}}},[n("span",{staticClass:"full"},[t._v("剪切")]),t._v(" "),n("span",{staticClass:"ml50"},[t._v("Ctrl + X")])])]),t._v(" "),n("div",[n("a",{staticClass:"flex",on:{click:function(e){return t.canvas.copy()}}},[n("span",{staticClass:"full"},[t._v("复制")]),t._v(" "),n("span",{staticClass:"ml50"},[t._v("Ctrl + C")])])]),t._v(" "),n("div",[n("a",{staticClass:"flex",on:{click:function(e){return t.canvas.paste()}}},[n("span",{staticClass:"full"},[t._v("粘贴")]),t._v(" "),n("span",{staticClass:"ml50"},[t._v("Ctrl + V")])])]),t._v(" "),n("div",{staticClass:"line"}),t._v(" "),n("div",[n("a",{staticClass:"flex",class:{disabled:!t.props.node||!t.props.node.image},on:{click:function(e){return t.onCopyImage()}}},[n("span",{staticClass:"full"},[t._v("复制节点图片地址")])])])])}),[],!1,null,null,null).exports},computed:{event:function(){return this.$store.state.event.event}},watch:{event:function(t){this["handle_"+t.name]&&this["handle_"+t.name](t.data)},$route:function(t){this.open()}},created:function(){var t=this;if(window.echartsData){for(var e in window.echartsData)document.body.removeChild(window.echartsData[e]).div;window.echartsData={}}Object(c.registerNode)("draw",(function(t,e){})),Object(c.registerNode)("flowData",d.flowData,d.flowDataAnchors,d.flowDataIconRect,d.flowDataTextRect),Object(c.registerNode)("flowSubprocess",d.flowSubprocess,null,d.flowSubprocessIconRect,d.flowSubprocessTextRect),Object(c.registerNode)("flowDb",d.flowDb,null,d.flowDbIconRect,d.flowDbTextRect),Object(c.registerNode)("flowDocument",d.flowDocument,d.flowDocumentAnchors,d.flowDocumentIconRect,d.flowDocumentTextRect),Object(c.registerNode)("flowInternalStorage",d.flowInternalStorage,null,d.flowInternalStorageIconRect,d.flowInternalStorageTextRect),Object(c.registerNode)("flowExternStorage",d.flowExternStorage,d.flowExternStorageAnchors,d.flowExternStorageIconRect,d.flowExternStorageTextRect),Object(c.registerNode)("flowQueue",d.flowQueue,null,d.flowQueueIconRect,d.flowQueueTextRect),Object(c.registerNode)("flowManually",d.flowManually,d.flowManuallyAnchors,d.flowManuallyIconRect,d.flowManuallyTextRect),Object(c.registerNode)("flowDisplay",d.flowDisplay,d.flowDisplayAnchors,d.flowDisplayIconRect,d.flowDisplayTextRect),Object(c.registerNode)("flowParallel",d.flowParallel,d.flowParallelAnchors,null,null),Object(c.registerNode)("flowComment",d.flowComment,d.flowCommentAnchors,null,null),Object(c.registerNode)("activityFinal",h.activityFinal,null,h.activityFinalIconRect,h.activityFinalTextRect),Object(c.registerNode)("swimlaneV",h.swimlaneV,null,h.swimlaneVIconRect,h.swimlaneVTextRect),Object(c.registerNode)("swimlaneH",h.swimlaneH,null,h.swimlaneHIconRect,h.swimlaneHTextRect),Object(c.registerNode)("forkH",h.fork,h.forkHAnchors,h.forkIconRect,h.forkTextRect),Object(c.registerNode)("forkV",h.fork,h.forkVAnchors,h.forkIconRect,h.forkTextRect),Object(c.registerNode)("simpleClass",f.simpleClass,null,f.simpleClassIconRect,f.simpleClassTextRect),Object(c.registerNode)("interfaceClass",f.interfaceClass,null,f.interfaceClassIconRect,f.interfaceClassTextRect),Object(c.registerNode)("lifeline",m.lifeline,m.lifelineAnchors,m.lifelineIconRect,m.lifelineTextRect),Object(c.registerNode)("sequenceFocus",m.sequenceFocus,m.sequenceFocusAnchors,m.sequenceFocusIconRect,m.sequenceFocusTextRect),Object(v.register)(),document.onclick=function(e){t.contextmenu={left:null,top:null,bottom:null}}},mounted:function(){this.canvasOptions.on=this.onMessage,this.canvas=new r.Topology("topology-canvas",this.canvasOptions),this.open(),this.$route.query.lock&&this.canvas.lock(1)},methods:{open:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$route.query.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$axios.$get("/api/topology/"+t.$route.query.id);case 4:(data=e.sent)&&data.id&&(t.canvas.open(data.data),t.$store.state.canvas.data.locked&&t.canvas.lock(1));case 6:case"end":return e.stop()}}),e)})))()},onDrag:function(t,e){t.dataTransfer.setData("Text",JSON.stringify(e.data))},onMessage:function(t,data){var e=this;setTimeout((function(){switch(t){case"node":case"addNode":e.props={node:data,line:null,multi:!1,expand:e.props.expand,nodes:null,locked:data.locked};break;case"line":case"addLine":e.props={node:null,line:data,multi:!1,nodes:null,locked:data.locked};break;case"multi":e.props={node:null,line:null,multi:!0,nodes:data.length>1?data:null,locked:e.getLocked({nodes:data})};break;case"space":e.props={node:null,line:null,multi:!1,nodes:null,locked:!1};break;case"moveOut":break;case"moveNodes":case"resizeNodes":data.length>1?e.props={node:null,line:null,multi:!0,nodes:data,locked:e.getLocked({nodes:data})}:e.props={node:data[0],line:null,multi:!1,nodes:null,locked:!1};break;case"resize":case"scale":case"locked":e.canvas&&e.canvas.data&&e.$store.commit("canvas/data",{scale:e.canvas.data.scale||1,lineName:e.canvas.data.lineName,fromArrowType:e.canvas.data.fromArrowType,toArrowType:e.canvas.data.toArrowType,locked:e.canvas.data.locked})}}),0)},getLocked:function(data){var t=!0;if(data.nodes&&data.nodes.length){var e,n=D(data.nodes);try{for(n.s();!(e=n.n()).done;){if(!e.value.locked){t=!1;break}}}catch(t){n.e(t)}finally{n.f()}}if(t&&data.lines){var o,r=D(data.lines);try{for(r.s();!(o=r.n()).done;){if(!o.value.locked){t=!1;break}}}catch(t){r.e(t)}finally{r.f()}}return t},onUpdateProps:function(t){this.canvas.updateProps(t)},handle_new:function(data){this.canvas.open({nodes:[],lines:[]})},handle_open:function(data){this.handle_replace(data)},handle_replace:function(data){var t=this,input=document.createElement("input");input.type="file",input.onchange=function(e){var n=e.srcElement||e.target;if(n.files&&n.files[0]){n.files[0].name.replace(".json","");var o=new FileReader;o.onload=function(e){var text=e.target.result+"";try{var n=JSON.parse(text);t.canvas.open(n)}catch(e){return!1}},o.readAsText(n.files[0])}},input.click()},handle_save:function(data){l.saveAs(new Blob([JSON.stringify(this.canvas.data)],{type:"text/plain;charset=utf-8"}),"le5le.topology.json")},handle_savePng:function(data){this.canvas.saveAsImage("le5le.topology.png")},handle_saveSvg:function(data){var t,e=new C2S(this.canvas.canvas.width+200,this.canvas.canvas.height+200),n=D(this.canvas.data.nodes);try{for(n.s();!(t=n.n()).done;){t.value.render(e)}}catch(t){n.e(t)}finally{n.f()}var o,r=D(this.canvas.data.lines);try{for(r.s();!(o=r.n()).done;){o.value.render(e)}}catch(t){r.e(t)}finally{r.f()}var l=e.getSerializedSvg();l=(l=l.replace("<defs/>","<defs>\n\t\t\t\t<style type=\"text/css\">\n\t\t\t\t@font-face {\n\t\t\t\tfont-family: 'topology';\n\t\t\t\tsrc: url('http://at.alicdn.com/t/font_1331132_h688rvffmbc.ttf?t=1569311680797') format('truetype');\n\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t\t</defs>")).replace(/--le5le--/g,"&#x");var c=window.URL||window,d=new Blob([l]),h=c.createObjectURL(d),a=document.createElement("a");a.setAttribute("download","le5le.topology.svg"),a.setAttribute("href",h);var f=document.createEvent("MouseEvents");f.initEvent("click",!0,!0),a.dispatchEvent(f)},handle_undo:function(data){this.canvas.undo()},handle_redo:function(data){this.canvas.redo()},handle_copy:function(data){this.canvas.copy()},handle_cut:function(data){this.canvas.cut()},handle_parse:function(data){this.canvas.paste()},handle_state:function(data){this.canvas.data[data.key]=data.value,this.$store.commit("canvas/data",{scale:this.canvas.data.scale||1,lineName:this.canvas.data.lineName,fromArrowType:this.canvas.data.fromArrowType,toArrowType:this.canvas.data.toArrowType,fromArrowlockedType:this.canvas.data.locked})},onContextMenu:function(t){t.preventDefault(),t.stopPropagation(),t.clientY+360<document.body.clientHeight?this.contextmenu={left:t.clientX+"px",top:t.clientY+"px"}:this.contextmenu={left:t.clientX+"px",bottom:document.body.clientHeight-t.clientY+"px"}}},destroyed:function(){this.canvas.destroy()}},j=(n(489),Object(_.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[t.$store.state.canvas.data.locked?t._e():n("div",{staticClass:"tools"},t._l(t.tools,(function(e,o){return n("div",{key:o},[n("div",{staticClass:"title"},[t._v(t._s(e.group))]),t._v(" "),n("div",{staticClass:"buttons"},t._l(e.children,(function(e,i){return n("a",{key:i,attrs:{title:e.name,draggable:e.data},on:{dragstart:function(n){return t.onDrag(n,e)}}},[n("i",{class:"iconfont "+e.icon})])})),0)])})),0),t._v(" "),n("div",{staticClass:"full",attrs:{id:"topology-canvas"},on:{contextmenu:function(e){return t.onContextMenu(e)}}}),t._v(" "),n("div",{staticClass:"props",style:t.props.expand?"overflow: visible":""},[n("CanvasProps",{attrs:{props:t.props},on:{"update:props":function(e){t.props=e},change:t.onUpdateProps}})],1),t._v(" "),t.contextmenu.left?n("div",{staticClass:"context-menu",style:this.contextmenu},[n("CanvasContextMenu",{attrs:{canvas:t.canvas,props:t.props},on:{"update:props":function(e){t.props=e}}})],1):t._e()])}),[],!1,null,null,null));e.default=j.exports}}]);